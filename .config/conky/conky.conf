# vi:syntax=lua

conky.config = {
    -- SETTINGS
    background = true,
    update_interval = 4,

    -- WINDOW
    alignment = 'top_left',
    gap_x = 20,
    gap_y = 20,

    own_window = true,
    own_window_transparent = true,
    own_window_type = 'desktop',

    -- GRAPHICS
    draw_shades = false,

    -- TEXT
    use_xft = true,
    font = 'DroidSansMono Nerd Font:size=10',
}

conky.text = [[
${time %F %T}
$sysname $kernel on $machine
${color grey}Uptime:$color $uptime

${if_match ${battery_percent BAT0} <= 10}\
${color red}${blink Battery:} \
${else}\
${color grey}Battery: \
${endif}\
${color}${battery_bar 6,70} ${battery} ${battery_time}
${if_match ${battery_percent BAT1} <= 10}\
${color red}${blink Battery:} \
${else}\
${color grey}Battery: \
${endif}\
${color}${battery_bar 6,70 BAT1} ${battery BAT1} ${battery_time BAT1}

${color grey}Resources ${color grey}$hr

${color grey}CPU:$color $cpu% ${cpubar 6}
${color grey}RAM:$color $mem/$memmax - $memperc% ${membar 6}
${color grey}Swap:$color $swap/$swapmax - $swapperc% ${swapbar 6}
${color grey}Storage:$color ${fs_used /}/${fs_size /} ${fs_bar 6 /}

${color grey}Network ${color grey}$hr

${color grey}IP: $color${addr wlp3s0}
${color grey}ESSID: $color${wireless_essid wlp3s0} [${wireless_link_qual wlp3s0}%]
${color grey}Speed:$color ${upspeed wlp3s0}/${downspeed wlp3s0}
${color grey}VPN ${execp nordvpn status | cut -d":" -f2 | head -2 | paste -sd ":" - | xargs}

${color grey}$hr

${color grey}Processes:$color $processes  ${color grey}Running:$color $running_processes
${color grey}Name              PID   CPU%   MEM%
${color lightgrey} ${top name 1} ${top pid 1} ${top cpu 1} ${top mem 1}
${color lightgrey} ${top name 2} ${top pid 2} ${top cpu 2} ${top mem 2}
${color lightgrey} ${top name 3} ${top pid 3} ${top cpu 3} ${top mem 3}
${color lightgrey} ${top name 4} ${top pid 4} ${top cpu 4} ${top mem 4}
]]
